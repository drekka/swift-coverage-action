# Swift Coverage report action

This action must be run after a `swift build --enable-code-coverage â€¦` action. It gathers the coverage data generated by the unit testing and fails the build if any file's coverage is below the minimum required. By default, 80%. 

When coverage fails a report is appended to the build summary listing the files that failed so developers can address the issue.

# Usage

Minimal usage:

```yaml
- run swift test --enable-code-coverage
- uses: drekka/swift-coverage-action@main@v1
```

Available arguments. All of these are optional and listed here with their default values.

```yaml
- run swift test --enable-code-coverage
- uses: drekka/swift-coverage-action@main@v1
  with:
    # The minimum percentage of coverage each source file
    # should met for the action to be successful.
    coverage: 80

    # Display all sources files. 
    # By default this action only reports the files that fail 
    # to met the minimum coverage.
    show-all-files: false
    
    # By default the report is sorted by coverage percentage
    # then file name where percentages are the same.
    # Enabling this flag sorts the report by file name
    # which is useful when there are many files in the list.
    sort-by-name: false        

    # The Swift build directory.
    # This should match the Swift compilers --scratch-path argument.
    # The folder is searched for the JSON code coverage files.
    build-dir: .build

    # Glob used within the build-dir to locate the 
    # code coverage JSON files.
    coverage-files: **/codecov/*.json
        
    # Comma list of globs which define the source
    # files we want coverage for. 
    # Generally these should match the folders where
    # the sources for your project reside.
    includes: **/Sources/**
        
    # Comma list of globs which define source
    # files we want to exclude from coverage reporting. 
    # When filtering the files to report on, 
    # includes are processed first, then excludes.
    includes: 
```